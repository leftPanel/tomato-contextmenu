var tomatoContextmenu=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};return function(){var n=function(){function t(t,n,o){if(window.jQuery){var r=$(t);return r.on(n,o),function(){r.off(n,o),r=null,t=null}}if(document.addEventListener){var i="focus"===n;return t.addEventListener(n,o,i),function(){t.removeEventListener(n,o,i),t=null}}if(document.attachEvent){var l=e(o,t);return t.attachEvent("on"+n,l),function(){t.detachEvent("on"+n,l),t=null}}}function e(t,e){return function(n){return n=n||window.event,n.target=n.target||n.srcElement||e,n.preventDefault=function(){n.returnValue=!1},n.stopPropagation=function(){n.cancelBubble=!0},n.which=n.keyCode?n.keyCode:isNaN(n.button)?void 0:n.button+1,n.relatedTarget="mouseover"===n.type?n.fromElement:"mouseout"===n.type?n.toElement:null,t(n)}}return t}(),o=function(){return new(function(){function e(){t(this,e)}return e.prototype.map=function(t,e){var n,o,r;for(n=t.length,o=0,r=[];o<n;o++)r.push(e(t[o],o,t));return r},e.prototype.each=function(t,e){var n,o,r=t;for(n=r.length,o=0;o<n;o++)e(r[o],o,r)},e.prototype.consume=function(t,e){for(;t.length;)e(t.shift())},e.prototype.findRight=function(t,e){var n=void 0;for(n=t.length-1;n>=0;n--)if(e(t[n],n,t))return t[n];return null},e.prototype.closest=function(t,e){if(t.closest)return t.closest(e);var n=void 0;for(n=t;n;n=n.parentNode)if(this.matches(n,e))return n;return null},e.prototype.matches=function(t,e){var n=void 0,o=void 0;if(this.each(["matches","matchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],function(r){t[r]&&(n=!0,o=t[r](e))}),n)return o;for(var r=(t.parentNode||t.ownerDocument||document).querySelectorAll(e),i=r.length;--i>=0&&r.item(i)!==t;);return i>-1},e.prototype.prev=function(t,e){var n=void 0;for(n=t.previousSibling;n;n=n.previousSibling)if(1===n.nodeType&&e(n))return n;return null},e.prototype.next=function(t,e){var n=void 0;for(n=t.nextSibling;n;n=n.nextSibling)if(1===n.nodeType&&e(n))return n;return null},e.prototype.lastChild=function(t,e){var n=void 0;for(n=t.lastChild;n;n=n.previousSibling)if(1===n.nodeType&&e(n))return n;return null},e.prototype.firstChild=function(t,e){var n=void 0;for(n=t.firstChild;n;n=n.nextSibling)if(1===n.nodeType&&e(n))return n;return null},e}())}(),r=function(){function t(t){var e,n=document.createElement("div");for(n.innerHTML=t,e=0;e<n.childNodes.length;e++)if(1===n.childNodes[e].nodeType)return n.childNodes[e];return null}return t}(),i=function(){function t(t,e,n){var o={top:n,left:e},r=document.documentElement.clientHeight,i=document.documentElement.clientWidth,l=t.clientHeight,u=t.clientWidth;return o.top+l>r&&(o.top-=l),o.top<0&&(o.top=0),o.left+u>i&&(o.left-=u),o.left<0&&(o.left=0),o}return t}(),l=function(){function t(t){if(t.closest)return t.closest("li");var e=null;for(e=t;e;e=e.parentNode)if(e.tagName&&"LI"===e.tagName.toUpperCase())return e;return null}return t}(),u=function(){return function t(e){var n=e.kind,r=e.text,i=e.disabled,l=e.active,u=e.callbackId,c=e.children,a=c?"data-has-children":"";switch(n){case"separator":return'<li class="divider" style="margin:3px 0;"></li>';default:return'<li tabindex="0" class="'+(i&&"disabled")+" "+(l&&"active")+'" data-callback-id="'+u+'" style="position:relative;" '+a+'>\n        <a tabindex="-1" href="javascript:void(0);" style="outline:0;">'+r+"</a>\n        "+(c?'<span class="glyphicon glyphicon-menu-right" style="position: absolute; top: 7px;right:2px;"></span>':"")+"\n        "+(c?'<ul  class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="position:absolute;left:auto;top:0;right:100%;display:none;margin:0;padding:3px 0;">'+o.map(c,t).join("")+"</ul>":"")+"\n      </li>"}}}(),c=function(){function t(t,e){if(1!==t.nodeType)return!1;if(t.classList)return t.classList.contains(e);var n=t.className.split(/\s+/),o=void 0;for(o=0;o<n.length;o++)if(n[o]===e)return!0;return!1}return t}(),a=function(){function t(t,e){if(1===t.nodeType){if(t.classList)return void t.classList.add(e);t.className+=" "+e+" "}}return t}(),s=function(){function t(t,e){if(1===t.nodeType){if(t.classList)return void t.classList.remove(e);var n=t.className.split(/\s+/),o=void 0,r=[];for(o=0;o<n.length;o++)n[o]!==e&&r.push(n[o]);t.className=r.join(" ")}}return t}(),d=function(){return function(){function e(n,o){var r=this;t(this,e),this.done=!1,this.job=n,this.cancelHanler=setTimeout(function(){n(),r.done=!0,r.job=null},o)}return e.prototype.skip=function(){this.done||this.job()},e.prototype.cancel=function(){clearTimeout(this.cancelHanler)},e}()}(),f=function(){function t(t,r){var i=t.style.cssText,l=n(i),u=e({},l,r);t.style.cssText=o(u)}function n(t){var e={},n=t.split(/\s*;\s*/g),o=void 0;for(o=0;o<n.length;o++){var r=n[o].split(/\s*:\s*/g),i=r[0],l=r[1];e[i]=l}return e}function o(t){var e="",n=void 0;for(n in t)t.hasOwnProperty(n)&&(e+=n+":"+t[n]+";");return e}return t}();return function(){function t(t){var p=t.actions,v=t.x,h=t.y,m=t.callback,y=o.map(p,u).join(""),b='\n        <div class="dropdown clearfix context-menu" style="position: fixed;top:0px;left:0px;z-index:99999;visibility:hidden;">\n          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin:0;padding:3px 0;">\n            '+y+"\n          </ul>\n        </div>\n      ",g=document.body.appendChild(r(b)),w=!1,x=null,k=function(t,n){if(n){f(t,{visibility:"hidden",display:"block",top:0,left:"100%",right:"auto",bottom:"auto"});var r=t.getBoundingClientRect(),i=r.right,l=(r.top,r.bottom);r.left;i>document.documentElement.clientWidth&&f(t,{right:"100%",left:"auto"}),l>document.documentElement.clientHeight&&f(t,{bottom:0,top:"auto"}),t.style.visibility="visible"}else t.style.display="none",o.each(t.querySelectorAll("li"),function(t){return s(t,e)})},S=function(){g&&(o.consume(N,function(t){return t&&t()}),g&&g.parentNode&&(g.parentNode.removeChild(g),g=null),S=null)},E=function(t){if(g)switch(t.type){case"resize":case"DOMMouseScroll":case"mousewheel":case"blur":m(!0,null),S();break;case"contextmenu":w&&(m(!0,null),S());break;case"mousedown":if(g.contains(t.target))return;break;case"click":case"touchstart":if(t.target===window||!g.contains(t.target)&&w)m(!0,null),S();else{var n=l(t.target),o=n&&c(n,"disabled"),r=n&&n.getAttribute("data-callback-id"),i=n&&n.hasAttribute("data-has-children");!n||null==r||o||i||(m(!1,r),S())}break;case"mouseover":if(t.target===window||!g.contains(t.target))return void(x&&(x.cancel(),x=null));t.target.focus();break;case"focus":case"focusin":if(t.target===window||!g.contains(t.target))return m(!0,null),void S();var u=t.target,s=l(u);if(s){var f=s.hasAttribute("data-has-children"),p=s.querySelector("ul, ol");if(c(s,e))return;x&&(x.cancel(),x=null),x=new d(function(){T(s),f&&(k(p,!0),a(s,e))},200)}break;case"keydown":var v=t.keyCode;switch(v){case 37:case 38:case 39:case 40:var h=C(g),y=L(h);h&&M(h,y,37===v?"parent":38===v?"pre":39===v?"child":40===v?"next":"");break;case 27:m(!0,null),S();break;case 32:case 13:var b=C(g),E=L(b);E&&E.click()}t.preventDefault()}},N=[n(document,"mousedown",E),n(document,"click",E),n(document,"touchstart",E),n(document,"contextmenu",E),n(document,"mousewheel",E),n(document,"DOMMouseScroll",E),n(document,"resize",E),n(document,"mouseover",E),n(document,"focus",E),n(document,"focusin",E),n(document,"keydown",E),n(window,"blur",E)],T=function(t){var n=void 0;for(n=t.parentNode.firstChild;null!==n;n=n.nextSibling)n.querySelectorAll&&(s(n,e),o.each(n.querySelectorAll("ul, ol"),function(t){return k(t,!1)}))},C=function(t){var e=null;return t.contains(document.activeElement)&&(e=o.closest(document.activeElement,"ul, ol")),e||o.findRight(t.querySelectorAll("ul, ol"),function(t){return"none"!==t.style.display})},L=function(t){return t&&t.contains(document.activeElement)?l(document.activeElement):null},M=function t(e,n,r){switch(r){case"pre":var i=n&&o.prev(n,j)||o.lastChild(e,j);i&&i.focus();break;case"next":var l=n&&o.next(n,j)||o.firstChild(e,j);l&&l.focus();break;case"parent":if(n){var u=o.closest(e,"li");u&&u.focus()}break;case"child":if(n){var c=n.querySelector("ul, ol");c&&t(c,null,"next")}}},j=function(t){return t instanceof HTMLLIElement&&!c(t,"disabled")&&t.querySelector("a")};return setTimeout(function(){var t=i(g,v,h);f(g,{left:t.left+"px",top:t.top+"px",visibility:"visible"}),w=!0},0),function(){m(!0,null),S()}}var e="hover";return t}()}()}();